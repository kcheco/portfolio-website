language: ruby
install:
- bundle update --bundler
cache: bundler
rvm: 2.4.1
services: postgresql
addons:
  chrome: stable
before_script:
- bundle exec rake db:create
script:
- bin/rake db:migrate RAILS_ENV=test
- bin/rake
deploy:
  - provider: codedeploy
    access_key_id:
      secure: surKRHFfG7foeEOXtuX5+yVYl9/rqUwiZBklqGpAU/GM76XF5NzohZrJHUQdTkwkX8cUzMo/k+l7ha9D1iNYpFGtjThNuYyJHiIThteYbmY0ki5ItenkaS/aYj+rlQ7za3SDgUJ6OZMJSgvFUA2+kN6P1K94iifQCK7GG2LjgvSViGN3LdLKfzNCpCTebNHMCQLXKY8ensv6kPZJiLU8itjQybn6GjOEB6qaA9ovWUzUc84Os7PVfaX2ccKymaKkCb7BK1shvsFU8KbPqLmVeRfPC32qpd1dKJUZjxUZ2wyOsSSmfcNWgJJhid7UC/A85cg2eL6LwrXlMSbSqX2PO1PAUnGuc1W94JFzJVC4qo9Yta6PQPAcYuNS1Ws4YYb9q76jO7mMi2Jk+WkpEmUAMDETbQ9TqmdjXmZ48W3mfqmX+KnFeNDSNsm1ZVJv5DKLx8ivICv3HF3YQNyrado3nYimAoPo2k/CpgoPbLvX2BDMilG4sJj2CCdbMRak1PmbDIXCo/RgsXNWFm6xU8Qk1SM638N8xyr1SX9cPLkzeEvSHB34UY7fSVJUI8VRLBwSapW+R/tskIF0puscmTQj0GVqCVokGt6wzSlooVfz0dxPnRZ8VaLZN4rysmRGPxEig7dTTEBBE15rgMHh02aVOIDgwwWR8P6T5X7dtOjw1v0=
    secret_access_key:
      secure: wESMNrpUR5zhZ9Zb8ZrvKGqBs/FdVkb6HW5WgDuIhhscyNQ+8GBA0ZvLmYEZpiir7cIO/TVl6m0Dn6zTNHdbfxAfasQx8lTKde6+3slXOThHZGPvZAS6ro6ygwM7Ue9UVgaDcibtmK8AAkNPZSSYeD+Suw8NVXx4t0Mv6LaQP5zTIx2K5RNooJo7mALesIHMC0JK2kBJoDq2FdP0+toBlaLYOuAlPCixcL0bD6YdG3AKGn0S91UC06gp/HYRAkMyQB4EERkOtqOPIVR+3HzGwmfIeSkhG696UAehU0+ip84Y/K8O2Awj5iTrCI0fwDxVEqPAT8kBD0k6To+73F6+/USQovgJ81Wev7d+Z/51KWFRFeRgskUVvqAaGhM64eLAdV3yEl7k6qGhfBX8jl8c7LJ6GJBXGzy92gfM01r0cRCx9Bbh6wKw9KmfP2GXsXW2jX446dsI7qgGiEU6NFKkbFxiHPBNb8O1TewaPvv9pZgG6FpXZKw5KCX52d1LzUQqIL1wtEmCNNH7vtpK501aB02OX2qJ/EaYmUV+w9sYwklqbsxCVMywgP7Nd2yUHOE/GBAhDGcs/I2gSbZU8/mXDqUdu4zksvPvX31K7wRhaKTK+G4cWfNn/E3VByYKdGxOOOJBH/tIPu5g4GDft1HbQsmMU0jNOl7UhFHH38JP50Y=
    bucket: codedeploy-checo-portfolio-us-east-1
    bundle_type: zip
    application: checo-portfolio
    key: development/latest/source.zip
    deployment_group: development
    region: us-east-1
    on:
      branch: develop
  - provider: codedeploy
    access_key_id:
      secure: surKRHFfG7foeEOXtuX5+yVYl9/rqUwiZBklqGpAU/GM76XF5NzohZrJHUQdTkwkX8cUzMo/k+l7ha9D1iNYpFGtjThNuYyJHiIThteYbmY0ki5ItenkaS/aYj+rlQ7za3SDgUJ6OZMJSgvFUA2+kN6P1K94iifQCK7GG2LjgvSViGN3LdLKfzNCpCTebNHMCQLXKY8ensv6kPZJiLU8itjQybn6GjOEB6qaA9ovWUzUc84Os7PVfaX2ccKymaKkCb7BK1shvsFU8KbPqLmVeRfPC32qpd1dKJUZjxUZ2wyOsSSmfcNWgJJhid7UC/A85cg2eL6LwrXlMSbSqX2PO1PAUnGuc1W94JFzJVC4qo9Yta6PQPAcYuNS1Ws4YYb9q76jO7mMi2Jk+WkpEmUAMDETbQ9TqmdjXmZ48W3mfqmX+KnFeNDSNsm1ZVJv5DKLx8ivICv3HF3YQNyrado3nYimAoPo2k/CpgoPbLvX2BDMilG4sJj2CCdbMRak1PmbDIXCo/RgsXNWFm6xU8Qk1SM638N8xyr1SX9cPLkzeEvSHB34UY7fSVJUI8VRLBwSapW+R/tskIF0puscmTQj0GVqCVokGt6wzSlooVfz0dxPnRZ8VaLZN4rysmRGPxEig7dTTEBBE15rgMHh02aVOIDgwwWR8P6T5X7dtOjw1v0=
    secret_access_key:
      secure: wESMNrpUR5zhZ9Zb8ZrvKGqBs/FdVkb6HW5WgDuIhhscyNQ+8GBA0ZvLmYEZpiir7cIO/TVl6m0Dn6zTNHdbfxAfasQx8lTKde6+3slXOThHZGPvZAS6ro6ygwM7Ue9UVgaDcibtmK8AAkNPZSSYeD+Suw8NVXx4t0Mv6LaQP5zTIx2K5RNooJo7mALesIHMC0JK2kBJoDq2FdP0+toBlaLYOuAlPCixcL0bD6YdG3AKGn0S91UC06gp/HYRAkMyQB4EERkOtqOPIVR+3HzGwmfIeSkhG696UAehU0+ip84Y/K8O2Awj5iTrCI0fwDxVEqPAT8kBD0k6To+73F6+/USQovgJ81Wev7d+Z/51KWFRFeRgskUVvqAaGhM64eLAdV3yEl7k6qGhfBX8jl8c7LJ6GJBXGzy92gfM01r0cRCx9Bbh6wKw9KmfP2GXsXW2jX446dsI7qgGiEU6NFKkbFxiHPBNb8O1TewaPvv9pZgG6FpXZKw5KCX52d1LzUQqIL1wtEmCNNH7vtpK501aB02OX2qJ/EaYmUV+w9sYwklqbsxCVMywgP7Nd2yUHOE/GBAhDGcs/I2gSbZU8/mXDqUdu4zksvPvX31K7wRhaKTK+G4cWfNn/E3VByYKdGxOOOJBH/tIPu5g4GDft1HbQsmMU0jNOl7UhFHH38JP50Y=
    bucket: codedeploy-checo-portfolio-us-east-1
    bundle_type: zip
    application: checo-portfolio
    key: production/latest/source.zip
    deployment_group: production
    region: us-east-1
    on:
      branch: master
